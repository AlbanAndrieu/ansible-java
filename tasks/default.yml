---
# setup the default Java implementation via system environment
#- assert: java_default_implementation in ['oracle', 'openjdk']
#  tags: java

- name: Fail on invalid user data
  tags: java
  fail:
    msg="java_default_implementation must be one of 'oracle' or 'openjdk'"
  when: java_default_implementation not in ['oracle', 'openjdk']


- name: Install Java default implementation
  tags: java
  template:
    src=java.sh.j2
    dest={{ java_install_dir }}/java.sh
    owner=root
    group=root
    mode=0755


- name: Activate Java system environment configuration
  tags: java
  file:
    state=link
    src={{ java_install_dir }}/java.sh
    dest=/etc/profile.d/java.sh
